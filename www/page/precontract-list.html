<div class="main-nav">
  <div ng-include="'./page/header.html'" ></div>
</div>
<div ng-controller="PrecontractListCtrl">
<div class="sub-header-wrap">
  <div class="container">
    <ul class="nav nav-pills" ng-if="currentMediaType == 2">
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.wechat">公众号资源</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.wechatprecontract">发布公众号资源任务</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.wechatPreList">发布任务列表</a></li>
    </ul>
    <ul class="nav nav-pills" ng-if="currentMediaType == 1">
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.weibo">微博资源</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.weiboprecontract">发布微博资源任务</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.weiboPreList">发布任务列表</a></li>
    </ul>
    <ul class="nav nav-pills" ng-if="currentMediaType == 3">
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.friends">朋友圈资源</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.friendsprecontract">发布朋友圈资源任务</a></li>
      <li ui-sref-active="active"><a href="#" ui-sref="advertiser.friendsPreList">发布任务列表</a></li>
    </ul>
  </div>
</div>
<div class="precontract-wrap page-minHeight">
  <div class="precontract-body container">
    <div class="header">
      <h4 class="page-title font-color"><i class="glyphicon glyphicon-file"></i> {{currentMediaName}}任务列表</h4>
    </div>
    <div class="main-body marginTop">
      <table class="table table-striped table-hover">
        <tr>
          <th>活动名称</th>
          <!--<th>活动简述</th>-->
          <th>预约结果反馈时间</th>
          <th>预计推广时间</th>
          <th>推广结束时间</th>
          <th>创建时间</th>
          <th>状态</th>
          <th>操作</th>
        </tr>
        <tr ng-repeat="item in dataList track by $index">
          <td>{{item.Title}}</td>
          <td>{{calcDate(item.FeedbackTime) | date: 'yyyy-MM-dd hh:mm'}}</td>
          <td>{{calcDate(item.StartTime) | date: 'yyyy-MM-dd hh:mm'}}</td>
          <td>{{calcDate(item.EndTime) | date: 'yyyy-MM-dd hh:mm'}}</td>
          <td>{{calcDate(item.AddTime) | date: 'yyyy-MM-dd hh:mm'}}</td>
          <td>{{getStatus(item.State)}}</td>
          <td>
            <a ng-if="item.State < 3" ng-click="editItem(item.ID)" href="javascript:;">修改</a>&nbsp;
            <a ng-if="item.State < 3" ng-click="removeItem(item.ID)" href="javascript:;">删除</a>
            <a ng-if="item.State == 3" href="#" ng-click="openDetail(item.ID,item.Mediatype)">详情</a>
          </td>
        </tr>
        <tr ng-if="dataList.length <=0">
          <td colspan="8" class="no-data">暂无数据</td>
        </tr>
      </table>
      <div class="txt-center">
        <pagination rotate="false" max-size="10" ng-change="pageChanged(currentPageIndex)" items-per-page="pageSize" boundary-links="true" total-items="totalItems" ng-model="currentPageIndex" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
      </div>
    </div>
  </div>
</div>
</div>